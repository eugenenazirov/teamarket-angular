"use strict";(self.webpackChunkteamarket_angular=self.webpackChunkteamarket_angular||[]).push([[988],{8988:(F,c,i)=>{i.r(c),i.d(c,{ItemsModule:()=>U});var s=i(6895),a=i(7599),e=i(1571),m=i(8746),l=i(2768),d=i(8939);let h=(()=>{class t{transform(u,n=100){return u.length<=n?u:u.slice(0,n)+"..."}}return t.\u0275fac=function(u){return new(u||t)},t.\u0275pipe=e.Yjl({name:"textOverflow",type:t,pure:!0}),t})();function f(t,o){1&t&&(e.TgZ(0,"h2",6),e._uU(1,"\u041d\u0430\u0448\u0438 \u0447\u0430\u0439\u043d\u044b\u0435 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438"),e.qZA())}function C(t,o){1&t&&(e.TgZ(0,"h2",6),e._uU(1,"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),e.qZA())}function I(t,o){1&t&&(e.TgZ(0,"h2",6),e._uU(1,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435..."),e.qZA())}const p=function(t){return["/catalog/item",t]};function E(t,o){if(1&t&&(e.TgZ(0,"div",9)(1,"div",10)(2,"a",11),e._UZ(3,"img",12),e.qZA(),e.TgZ(4,"div",13)(5,"h5",14),e._uU(6),e.qZA(),e.TgZ(7,"p",15),e._uU(8),e.ALo(9,"textOverflow"),e.qZA(),e.TgZ(10,"a",16),e._uU(11,"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"),e.qZA()()()()),2&t){const u=o.$implicit;e.xp6(2),e.Q6J("routerLink",e.VKq(9,p,u.id)),e.xp6(1),e.s9C("src",u.image,e.LSH),e.s9C("alt",u.title),e.xp6(3),e.Oqu(u.title),e.xp6(2),e.Oqu(e.xi3(9,6,u.description,120)),e.xp6(2),e.Q6J("routerLink",e.VKq(11,p,u.id))}}function v(t,o){if(1&t&&(e.TgZ(0,"div",7),e.YNc(1,E,12,13,"div",8),e.qZA()),2&t){const u=e.oxw();e.xp6(1),e.Q6J("ngForOf",u.teaItems)}}function x(t,o){1&t&&(e.TgZ(0,"div",17)(1,"div",18)(2,"h4",19),e._uU(3,"\u041e\u0448\u0438\u0431\u043a\u0430!"),e.qZA(),e.TgZ(4,"p"),e._uU(5,"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"),e.qZA(),e._UZ(6,"hr"),e.TgZ(7,"p",20),e._uU(8,"\u041c\u044b \u0434\u0435\u043b\u0430\u0435\u043c \u0432\u0441\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0435 \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u043b\u0430\u0434\u0438\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 \u0441\u0430\u0439\u0442\u0430"),e.qZA()()())}function y(t,o){1&t&&(e.TgZ(0,"div",21)(1,"span",22),e._uU(2,"Loading..."),e.qZA()())}let Z=(()=>{class t{constructor(u,n){this.teaItemService=u,this.searchItemsService=n,this.teaItems=[],this.isEmptyPage=!1,this.isErrorPage=!1,this.loading=!1,this.searchSubscription=null}ngOnInit(){const u=this.searchItemsService.searchItemName;""===u?this.fetchDefaultCatalogue():this.fetchSearchResults(u),this.subscribeOnSearch()}ngOnDestroy(){this.searchSubscription?.unsubscribe()}subscribeOnSearch(){this.searchSubscription=this.searchItemsService.search$.subscribe({next:u=>{""!==u?this.fetchSearchResults(u):this.fetchDefaultCatalogue()}})}fetchDefaultCatalogue(){this.loading=!0,this.teaItemService.getTeaItems().pipe((0,m.x)(()=>{this.loading=!1,this.checkEmptyPage()})).subscribe({next:u=>{this.teaItems=u},error:u=>{console.error(u),this.isErrorPage=!0}})}fetchSearchResults(u){this.loading=!0,this.teaItemService.getTeaItems(u).pipe((0,m.x)(()=>{this.loading=!1,this.checkEmptyPage()})).subscribe({next:n=>{this.teaItems=n},error:n=>{console.error(n),this.isErrorPage=!0}})}checkEmptyPage(){this.isEmptyPage=0===this.teaItems.length}}return t.\u0275fac=function(u){return new(u||t)(e.Y36(l.u),e.Y36(d.C))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-goods"]],decls:9,vars:6,consts:[[1,"collections","pt-4","pb-5"],[1,"container"],["class","text-center mb-5",4,"ngIf"],["class","row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 g-4",4,"ngIf"],["class","empty-message",4,"ngIf"],["class","spinner-border text-primary loader","role","status",4,"ngIf"],[1,"text-center","mb-5"],[1,"row","row-cols-lg-3","row-cols-md-2","row-cols-sm-1","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"card","h-100","tea-item-card"],[1,"card__image",3,"routerLink"],[1,"card-img-top",3,"src","alt"],[1,"card-body","d-flex","flex-column"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-primary","mt-auto","w-fit-content","btn-w","hvr-forward",3,"routerLink"],[1,"empty-message"],["role","alert",1,"alert","alert-danger"],[1,"alert-heading"],[1,"mb-0"],["role","status",1,"spinner-border","text-primary","loader"],[1,"visually-hidden"]],template:function(u,n){1&u&&(e.TgZ(0,"section",0)(1,"div",1),e.YNc(2,f,2,0,"h2",2),e.YNc(3,C,2,0,"h2",2),e.YNc(4,I,2,0,"h2",2),e.TgZ(5,"div",1),e.YNc(6,v,2,1,"div",3),e.YNc(7,x,9,0,"div",4),e.YNc(8,y,3,0,"div",5),e.qZA()()()),2&u&&(e.xp6(2),e.Q6J("ngIf",!n.isEmptyPage&&!n.loading),e.xp6(1),e.Q6J("ngIf",n.isEmptyPage&&!n.loading),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(2),e.Q6J("ngIf",!n.isErrorPage),e.xp6(1),e.Q6J("ngIf",n.isErrorPage),e.xp6(1),e.Q6J("ngIf",n.loading))},dependencies:[s.sg,s.O5,a.rH,h],styles:[".card__image[_ngcontent-%COMP%]{max-width:400px;align-self:center}.loader[_ngcontent-%COMP%]{margin:100px auto;display:flex;width:100px;height:100px}.collections[_ngcontent-%COMP%]{min-height:80vh}"]}),t})(),_=(()=>{class t{}return t.\u0275fac=function(u){return new(u||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-catalog"]],decls:1,vars:0,template:function(u,n){1&u&&e._UZ(0,"app-goods")},dependencies:[Z]}),t})();var T=i(3900),O=i(515);function b(t,o){if(1&t){const u=e.EpF();e.TgZ(0,"div",3)(1,"h2",4),e._uU(2),e.qZA(),e.TgZ(3,"div",5),e._UZ(4,"img",6),e.qZA(),e.TgZ(5,"div",7)(6,"span",8),e._uU(7),e.ALo(8,"currency"),e.qZA(),e.TgZ(9,"button",9),e.NdJ("click",function(){e.CHM(u);const r=e.oxw();return e.KtG(r.buyItem())}),e._uU(10,"\u041a\u0443\u043f\u0438\u0442\u044c"),e.qZA()(),e.TgZ(11,"p",10),e._uU(12),e.qZA()()}if(2&t){const u=e.oxw();e.xp6(2),e.Oqu(u.teaItem.title),e.xp6(2),e.s9C("src",u.teaItem.image,e.LSH),e.s9C("alt",u.teaItem.title),e.xp6(3),e.Oqu(e.Dn7(8,5,u.teaItem.price,"KZT","\u20b8")),e.xp6(5),e.Oqu(u.teaItem.description)}}function A(t,o){1&t&&(e.TgZ(0,"div",11)(1,"div",12)(2,"h4",13),e._uU(3,"\u041e\u0448\u0438\u0431\u043a\u0430!"),e.qZA(),e.TgZ(4,"p"),e._uU(5,"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"),e.qZA(),e._UZ(6,"hr"),e.TgZ(7,"p",14),e._uU(8,"\u041c\u044b \u0434\u0435\u043b\u0430\u0435\u043c \u0432\u0441\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0435 \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u043b\u0430\u0434\u0438\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 \u0441\u0430\u0439\u0442\u0430"),e.qZA()()())}const P=function(t){return{"full-height":t}};let w=(()=>{class t{constructor(u,n,r){this.teaItemService=u,this.router=n,this.activatedRoute=r,this.isEmptyPage=!1,this.teaItem={id:0,title:"",description:"",price:0,image:""}}ngOnInit(){this.showTeaItem()}showTeaItem(){this.activatedRoute.params.pipe((0,T.w)(u=>{const n=u.id;return n?this.teaItemService.getTeaItem(n):(this.router.navigate(["/catalog"]),O.E)})).subscribe({next:u=>{this.teaItem=u},error:u=>{console.error(u),this.isEmptyPage=!0}})}buyItem(){this.router.navigate(["/order"],{queryParams:{item:this.teaItem.title}})}}return t.\u0275fac=function(u){return new(u||t)(e.Y36(l.u),e.Y36(a.F0),e.Y36(a.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-one-item"]],decls:3,vars:5,consts:[[1,"one-item","py-5",3,"ngClass"],["class","one-item-block d-flex flex-column justify-content-center align-items-center",4,"ngIf"],["class","empty-message",4,"ngIf"],[1,"one-item-block","d-flex","flex-column","justify-content-center","align-items-center"],[1,"h2","title"],[1,"image-wrapper","mt-4"],[1,"image-img",3,"src","alt"],[1,"price-and-buy","d-flex","gap-2"],[1,"badge","price","bg-info","mt-2"],[1,"mt-2","btn","buy","btn-primary",3,"click"],[1,"description","mt-4"],[1,"empty-message"],["role","alert",1,"alert","alert-danger"],[1,"alert-heading"],[1,"mb-0"]],template:function(u,n){1&u&&(e.TgZ(0,"section",0),e.YNc(1,b,13,9,"div",1),e.YNc(2,A,9,0,"div",2),e.qZA()),2&u&&(e.Q6J("ngClass",e.VKq(3,P,n.isEmptyPage)),e.xp6(1),e.Q6J("ngIf",!n.isEmptyPage),e.xp6(1),e.Q6J("ngIf",n.isEmptyPage))},dependencies:[s.mk,s.O5,s.H9],styles:[".one-item-block[_ngcontent-%COMP%], .empty-message[_ngcontent-%COMP%]{max-width:700px;margin:0 auto}.full-height[_ngcontent-%COMP%]{min-height:87vh}.image-wrapper[_ngcontent-%COMP%]{width:500px}.image-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.description[_ngcontent-%COMP%]{max-width:700px}.price[_ngcontent-%COMP%]{font-size:30px}.buy[_ngcontent-%COMP%]{font-size:24px}"]}),t})();const D=[{path:"",component:_},{path:"item/:id",component:(()=>{class t{}return t.\u0275fac=function(u){return new(u||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-item-details"]],decls:1,vars:0,template:function(u,n){1&u&&e._UZ(0,"app-one-item")},dependencies:[w]}),t})()}];let g=(()=>{class t{}return t.\u0275fac=function(u){return new(u||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[a.Bz.forChild(D),a.Bz]}),t})();var B=i(4466);let U=(()=>{class t{}return t.\u0275fac=function(u){return new(u||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[s.ez,a.Bz,B.m,g,g]}),t})()}}]);