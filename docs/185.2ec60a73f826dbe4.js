"use strict";(self.webpackChunkteamarket_angular=self.webpackChunkteamarket_angular||[]).push([[185],{8185:(S,d,l)=>{l.r(d),l.d(d,{OrderModule:()=>k});var a=l(6895),s=l(7599),u=l(1571),n=l(433),c=l(9751),f=l(8505),g=l(8746),C=l(1005),h=l(2768);function v(r,t){1&r&&(u.TgZ(0,"div",29),u._uU(1," \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f "),u.qZA())}function _(r,t){1&r&&(u.TgZ(0,"div",29),u._uU(1," \u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b "),u.qZA())}function Z(r,t){1&r&&(u.TgZ(0,"div",29),u._uU(1," \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e "),u.qZA())}function N(r,t){1&r&&(u.TgZ(0,"div",29),u._uU(1," \u0424\u0430\u043c\u0438\u043b\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b "),u.qZA())}function A(r,t){1&r&&(u.TgZ(0,"div",29),u._uU(1," \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 "),u.qZA())}function F(r,t){1&r&&(u.TgZ(0,"div",29),u._uU(1," \u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e 11 \u0446\u0438\u0444\u0440 \u0438 \u0441\u0438\u043c\u0432\u043e\u043b + "),u.qZA())}function b(r,t){1&r&&(u.TgZ(0,"div",29),u._uU(1," \u0421\u0442\u0440\u0430\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b "),u.qZA())}function x(r,t){1&r&&(u.TgZ(0,"div",29),u._uU(1," \u0421\u0442\u0440\u0430\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b "),u.qZA())}function E(r,t){1&r&&(u.TgZ(0,"div",29),u._uU(1," \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043d\u0434\u0435\u043a\u0441 "),u.qZA())}function T(r,t){1&r&&(u.TgZ(0,"div",29),u._uU(1," \u0418\u043d\u0434\u0435\u043a\u0441 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b \u0438 \u0441\u0438\u043c\u0432\u043e\u043b \u0434\u0435\u0444\u0438\u0441\u0430 "),u.qZA())}function I(r,t){1&r&&(u.TgZ(0,"div",29),u._uU(1," \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 "),u.qZA())}function q(r,t){1&r&&(u.TgZ(0,"div",29),u._uU(1," \u0410\u0434\u0440\u0435\u0441 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b, \u0446\u0438\u0444\u0440\u044b \u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u044b ., -, / "),u.qZA())}function B(r,t){1&r&&(u.TgZ(0,"div",29),u._uU(1," \u0410\u0434\u0440\u0435\u0441 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 10 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 "),u.qZA())}function O(r,t){1&r&&(u.TgZ(0,"span",30),u._uU(1,"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437"),u.qZA())}const i=function(r){return{"is-invalid":r}},y=function(r){return{disabled:r}};function U(r,t){if(1&r){const e=u.EpF();u.TgZ(0,"form",4)(1,"h2",5),u._uU(2," \u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437 "),u.qZA(),u.TgZ(3,"div",6)(4,"div",7)(5,"label",8),u._uU(6,"\u0418\u043c\u044f"),u.qZA(),u._UZ(7,"input",9),u.YNc(8,v,2,0,"div",10),u.YNc(9,_,2,0,"div",10),u.qZA(),u.TgZ(10,"div",7)(11,"label",11),u._uU(12,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),u.qZA(),u._UZ(13,"input",12),u.YNc(14,Z,2,0,"div",10),u.YNc(15,N,2,0,"div",10),u.qZA(),u.TgZ(16,"div",7)(17,"label",13),u._uU(18,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),u.qZA(),u._UZ(19,"input",14),u.YNc(20,A,2,0,"div",10),u.YNc(21,F,2,0,"div",10),u.qZA()(),u.TgZ(22,"div",6)(23,"div",15)(24,"label",16),u._uU(25,"\u0421\u0442\u0440\u0430\u043d\u0430"),u.qZA(),u._UZ(26,"input",17),u.YNc(27,b,2,0,"div",10),u.YNc(28,x,2,0,"div",10),u.qZA(),u.TgZ(29,"div",15)(30,"label",18),u._uU(31,"\u0418\u043d\u0434\u0435\u043a\u0441"),u.qZA(),u._UZ(32,"input",19),u.YNc(33,E,2,0,"div",10),u.YNc(34,T,2,0,"div",10),u.qZA()(),u.TgZ(35,"div",20)(36,"label",21),u._uU(37,"\u0410\u0434\u0440\u0435\u0441"),u.qZA(),u._UZ(38,"input",22),u.YNc(39,I,2,0,"div",10),u.YNc(40,q,2,0,"div",10),u.YNc(41,B,2,0,"div",10),u.qZA(),u.TgZ(42,"div",20)(43,"label",23),u._uU(44,"\u0422\u043e\u0432\u0430\u0440"),u.qZA(),u._UZ(45,"input",24),u.qZA(),u.TgZ(46,"div",20)(47,"label",25),u._uU(48,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u0437\u0430\u043a\u0430\u0437\u0443"),u.qZA(),u._UZ(49,"textarea",26),u.qZA(),u.TgZ(50,"div",20)(51,"button",27),u.NdJ("click",function(){u.CHM(e);const m=u.oxw();return u.KtG(m.onSubmit())}),u._uU(52,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),u.qZA(),u.YNc(53,O,2,0,"span",28),u.qZA()()}if(2&r){const e=u.oxw();u.Q6J("formGroup",e.orderForm),u.xp6(7),u.Q6J("ngClass",u.VKq(22,i,(null==e.firstName?null:e.firstName.invalid)&&(null==e.firstName?null:e.firstName.touched))),u.xp6(1),u.Q6J("ngIf",null==e.firstName||null==e.firstName.errors?null:e.firstName.errors.required),u.xp6(1),u.Q6J("ngIf",null==e.firstName||null==e.firstName.errors?null:e.firstName.errors.pattern),u.xp6(4),u.Q6J("ngClass",u.VKq(24,i,(null==e.lastName?null:e.lastName.invalid)&&(null==e.lastName?null:e.lastName.touched))),u.xp6(1),u.Q6J("ngIf",null==e.lastName||null==e.lastName.errors?null:e.lastName.errors.required),u.xp6(1),u.Q6J("ngIf",null==e.lastName||null==e.lastName.errors?null:e.lastName.errors.pattern),u.xp6(4),u.Q6J("ngClass",u.VKq(26,i,(null==e.phone?null:e.phone.invalid)&&(null==e.phone?null:e.phone.touched))),u.xp6(1),u.Q6J("ngIf",null==e.phone||null==e.phone.errors?null:e.phone.errors.required),u.xp6(1),u.Q6J("ngIf",null==e.phone||null==e.phone.errors?null:e.phone.errors.pattern),u.xp6(5),u.Q6J("ngClass",u.VKq(28,i,(null==e.country?null:e.country.invalid)&&(null==e.country?null:e.country.touched))),u.xp6(1),u.Q6J("ngIf",null==e.lastName||null==e.lastName.errors?null:e.lastName.errors.required),u.xp6(1),u.Q6J("ngIf",null==e.lastName||null==e.lastName.errors?null:e.lastName.errors.pattern),u.xp6(4),u.Q6J("ngClass",u.VKq(30,i,(null==e.zip?null:e.zip.invalid)&&(null==e.zip?null:e.zip.touched))),u.xp6(1),u.Q6J("ngIf",null==e.zip||null==e.zip.errors?null:e.zip.errors.required),u.xp6(1),u.Q6J("ngIf",null==e.zip||null==e.zip.errors?null:e.zip.errors.pattern),u.xp6(4),u.Q6J("ngClass",u.VKq(32,i,(null==e.address?null:e.address.invalid)&&(null==e.address?null:e.address.touched))),u.xp6(1),u.Q6J("ngIf",null==e.address||null==e.address.errors?null:e.address.errors.required),u.xp6(1),u.Q6J("ngIf",null==e.address||null==e.address.errors?null:e.address.errors.pattern),u.xp6(1),u.Q6J("ngIf",null==e.address||null==e.address.errors?null:e.address.errors.minlength),u.xp6(10),u.Q6J("ngClass",u.VKq(34,y,e.loading)),u.xp6(2),u.Q6J("ngIf",e.formSubmitted&&!e.successfulResponse)}}function J(r,t){1&r&&(u.TgZ(0,"div",31)(1,"h2",32),u._uU(2," \u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0437\u0430\u043a\u0430\u0437, \u043c\u044b \u0441\u0432\u044f\u0436\u0435\u043c\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u0432 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f! "),u.qZA()())}let z=(()=>{class r{constructor(e,o,m,D){this.teaItemService=e,this.activatedRoute=o,this.router=m,this.fb=D,this.formSubmitted=!1,this.successfulResponse=!1,this.loading=!1,this.timerSubscription=null,this.timer$=new c.y(Y=>Y.next()),this.orderForm=this.fb.group({firstName:["",[n.kI.required,n.kI.pattern("^[\u0430-\u044f\u0410-\u042fa-zA-Z\\s]*$")]],lastName:["",[n.kI.required,n.kI.pattern("^[\u0430-\u044f\u0410-\u042fa-zA-Z\\s]*$")]],phone:["",[n.kI.required,n.kI.pattern("^(\\+)?\\d{11}$")]],country:["",[n.kI.required,n.kI.pattern("^[\u0430-\u044f\u0410-\u042fa-zA-Z\\s]*$")]],zip:["",[n.kI.required,n.kI.pattern("^\\d{5,6}(?:\\-\\d+)?$")]],address:["",[n.kI.required,n.kI.pattern("^[\u0430-\u044f\u0410-\u042fa-zA-Z0-9\\s,',./-]*$"),n.kI.minLength(10)]],teaItem:[{value:"",disabled:!0},[n.kI.required]],comment:[""]})}ngOnInit(){const e=this.activatedRoute.snapshot.queryParams.item;e?this.orderForm.patchValue({teaItem:e}):this.router.navigate(["/catalog"])}ngOnDestroy(){this.timerSubscription?.unsubscribe()}get firstName(){return this.orderForm.get("firstName")}get lastName(){return this.orderForm.get("lastName")}get phone(){return this.orderForm.get("phone")}get country(){return this.orderForm.get("country")}get zip(){return this.orderForm.get("zip")}get address(){return this.orderForm.get("address")}get teaItem(){return this.orderForm.get("teaItem")}get comment(){return this.orderForm.get("comment")}formValid(){return this.orderForm.valid}prepareFormData(){return{name:this.firstName?.value,last_name:this.lastName?.value,phone:this.phone?.value,country:this.country?.value,zip:this.zip?.value,product:this.teaItem?.value,address:this.address?.value,comment:this.comment?.value}}onSubmit(){if(!this.formValid())return void this.orderForm.markAllAsTouched();const e=this.prepareFormData();this.sendFormData(e),this.subscribeOnTimer()}sendFormData(e){this.loading=!0,this.teaItemService.orderTeaItem(e).pipe((0,f.b)(()=>{this.formSubmitted=!0}),(0,g.x)(()=>{this.loading=!1})).subscribe({next:o=>{this.successfulResponse=1===o.success},error:o=>{this.formSubmitted=!0,this.successfulResponse=!1,console.error(o)}})}subscribeOnTimer(){this.timerSubscription=this.timer$.pipe((0,C.g)(3e3)).subscribe(()=>{this.successfulResponse||(this.formSubmitted=!1,this.successfulResponse=!0)})}}return r.\u0275fac=function(e){return new(e||r)(u.Y36(h.u),u.Y36(s.gz),u.Y36(s.F0),u.Y36(n.qu))},r.\u0275cmp=u.Xpm({type:r,selectors:[["app-order-form"]],decls:4,vars:2,consts:[[1,"form","pt-5","pb-5"],[1,"container"],["class","col-lg-6 m-auto order-form","id","form","action","","novalidate","",3,"formGroup",4,"ngIf"],["class","thanks",4,"ngIf"],["id","form","action","","novalidate","",1,"col-lg-6","m-auto","order-form",3,"formGroup"],[1,"text-center","mb-5"],[1,"mb-3","row","g-4","align-items-center"],[1,"col-sm-12","col-md-4"],["for","inputFirstName",1,"form-label"],["formControlName","firstName","type","text","id","inputFirstName","aria-describedby","firstNameHelpInline",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","inputLastName",1,"form-label"],["formControlName","lastName","type","text","id","inputLastName","aria-describedby","lastNameHelpInline",1,"form-control",3,"ngClass"],["for","inputPhone",1,"form-label"],["formControlName","phone","type","text","id","inputPhone","aria-describedby","phoneHelpInline",1,"form-control",3,"ngClass"],[1,"col"],["for","inputCountry",1,"form-label"],["formControlName","country","type","text","id","inputCountry","aria-describedby","emailHelp",1,"form-control",3,"ngClass"],["for","inputPostalCode",1,"form-label"],["formControlName","zip","type","text","id","inputPostalCode",1,"form-control",3,"ngClass"],[1,"mb-3"],["for","inputAddress",1,"form-label"],["formControlName","address","type","text","id","inputAddress",1,"form-control",3,"ngClass"],["for","teaItem",1,"form-label"],["formControlName","teaItem","type","text","id","teaItem",1,"form-control"],["for","comment",1,"form-label"],["formControlName","comment","id","comment","aria-label","With textarea","data-dl-input-translation","true",1,"form-control"],["type","button",1,"btn","btn-primary","btn-w","hvr-forward",3,"ngClass","click"],["class","error-text link-danger mx-3",4,"ngIf"],[1,"invalid-feedback"],[1,"error-text","link-danger","mx-3"],[1,"thanks"],["id","thanks",1,"text-center","mb-5"]],template:function(e,o){1&e&&(u.TgZ(0,"section",0)(1,"div",1),u.YNc(2,U,54,36,"form",2),u.YNc(3,J,3,0,"div",3),u.qZA()()),2&e&&(u.xp6(2),u.Q6J("ngIf",!o.formSubmitted||!o.successfulResponse),u.xp6(1),u.Q6J("ngIf",o.formSubmitted&&o.successfulResponse))},dependencies:[a.mk,a.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u],styles:[".order-form[_ngcontent-%COMP%]{min-height:80vh}.thanks[_ngcontent-%COMP%]{min-height:80vh;display:flex;align-items:center;justify-content:center}"]}),r})();const Q=[{path:"",component:(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=u.Xpm({type:r,selectors:[["app-order"]],decls:1,vars:0,template:function(e,o){1&e&&u._UZ(0,"app-order-form")},dependencies:[z]}),r})()}];let p=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=u.oAB({type:r}),r.\u0275inj=u.cJS({imports:[s.Bz.forChild(Q),s.Bz]}),r})(),k=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=u.oAB({type:r}),r.\u0275inj=u.cJS({imports:[a.ez,s.Bz,n.u5,n.UX,p,p]}),r})()}}]);